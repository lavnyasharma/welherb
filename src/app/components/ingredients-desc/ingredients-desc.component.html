<div class="ingredients-section">
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h2 class="title">Ingredients<br />that nourish you inside-out</h2>

      <!-- Navigation arrows -->
    </div>

    <!-- Category filters -->
    <!-- <div class="category-filters">
      <button 
        *ngFor="let category of categories"
        class="category-btn"
        [class.active]="isCategoryActive(category)"
        (click)="selectCategory(category)">
        {{ category }}
      </button>
    </div> -->

    <!-- Ingredients carousel -->
    <!-- Ingredients carousel -->
    <app-infinite-carousel
      [items]="ingredients"
      [itemTemplate]="ingredientTemplate"
      [gap]="20"
    >
    </app-infinite-carousel>

    <ng-template #ingredientTemplate let-ingredient>
      <div
        class="ingredient-card"
        [class.flipped]="isFlipped(ingredient)"
        (click)="onInfoClick(ingredient, $event)"
      >
        <div class="card-inner">
          <!-- Front Face -->
          <div class="card-front">
            <div class="card-content">
              <div class="card-image">
                <img
                  [src]="ingredient.image"
                  [alt]="ingredient.name"
                  loading="lazy"
                  (error)="onImageError($event, ingredient)"
                  (load)="onImageLoad($event, ingredient)"
                />
              </div>
              <div class="card-footer">
                <span class="ingredient-name">{{ ingredient.name }}</span>
                <button
                  class="info-btn"
                  (click)="onInfoClick(ingredient, $event)"
                  [title]="ingredient.description"
                  [attr.aria-label]="'More info about ' + ingredient.name"
                >
                  <img src="assets/Group.svg" alt="Info" />
                </button>
              </div>
            </div>
          </div>

          <!-- Back Face -->
          <div class="card-back">
            <div class="back-content">
              <h3>{{ ingredient.name }}</h3>
              <p>
                {{ ingredient.short_description || ingredient.description }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
