<div class="container">
  <!-- Header Section -->
  <div class="header-section">
    <h1 class="main-title">How to Use</h1>
    <div
      class="switch-profile-dropdown"
      *ngIf="savedProfiles$ | async as profiles"
    >
      <div class="dropdown-trigger" (click)="toggleDropdown()">
        <span class="current-profile-name">{{
          (selectedProfile$ | async)?.name || "Select Profile"
        }}</span>
        <i class="fa fa-chevron-down" [class.rotated]="isDropdownOpen"></i>
      </div>

      <div class="dropdown-menu" *ngIf="isDropdownOpen">
        <div
          class="dropdown-item"
          *ngFor="let profile of profiles"
          (click)="selectProfile(profile)"
        >
          <span class="profile-name">{{ profile.name }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Dietary Advice Section -->
  <div class="para" *ngIf="dietaryAdvice?.length">
    <ng-container *ngFor="let line of dietaryAdvice">
      {{ line }}<br />
    </ng-container>
  </div>

  <!-- Content Card -->
  <div class="content-card">
    <!-- Left Section - Helps How -->
    <div class="left-section" *ngIf="helpsHow?.length">
      <div class="info-section">
        <div class="section-header">
          <div class="plus-icon">
            <img
              src="https://wrijpsiiuvmeqaeklnqi.supabase.co/storage/v1/object/sign/new/star%20(1)%204.svg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNTNkMmE3MS00ODk1LTRmN2YtYWExYS01ZjA1ZDhlYWE2YTciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJuZXcvc3RhciAoMSkgNC5zdmciLCJpYXQiOjE3NTYyOTY0MTEsImV4cCI6MzY1OTUzMDc3MzY0MTF9.KlJEocKVqN72HUxE1mIKNbuYn-9Al1V8z-S6KkM6eAk"
              alt="Plus Icon"
            />
          </div>
          <h3 style="font-family: 'Lato', sans-serif !important">Dosage</h3>
          <span class="tag">Not Personalised Dosage</span>
        </div>
        <div class="section-content">
          <ng-container *ngFor="let item of helpsHow; let i = index">
            <p *ngIf="i === 0">{{ item }}</p>
            <div *ngIf="i === 1" class="subsection">
              <h4>Once BP is normal</h4>
              <p>{{ item }}</p>
            </div>
          </ng-container>
        </div>
      </div>

      <!-- Avoid Section - if you have more helpsHow items -->
      <div class="info-section" *ngIf="helpsHow?.length > 2">
        <div class="section-header">
          <div class="plus-icon">
            <img
              src="https://wrijpsiiuvmeqaeklnqi.supabase.co/storage/v1/object/sign/new/star%20(1)%204.svg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNTNkMmE3MS00ODk1LTRmN2YtYWExYS01ZjA1ZDhlYWE2YTciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJuZXcvc3RhciAoMSkgNC5zdmciLCJpYXQiOjE3NTYyOTY0MTEsImV4cCI6MzY1OTUzMDc3MzY0MTF9.KlJEocKVqN72HUxE1mIKNbuYn-9Al1V8z-S6KkM6eAk"
              alt="Plus Icon"
            />
          </div>
          <h3 style="font-family: 'Lato', sans-serif !important">Avoid</h3>
        </div>
        <div class="section-content">
          <p>{{ helpsHow[2] }}</p>
        </div>
      </div>
    </div>

    <!-- Right Section - Helps Who -->
    <div class="right-section" *ngIf="helpsWho?.length">
      <div class="info-section">
        <div class="section-header">
          <div class="plus-icon">
            <img
              src="https://wrijpsiiuvmeqaeklnqi.supabase.co/storage/v1/object/sign/new/star%20(1)%204.svg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNTNkMmE3MS00ODk1LTRmN2YtYWExYS01ZjA1ZDhlYWE2YTciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJuZXcvc3RhciAoMSkgNC5zdmciLCJpYXQiOjE3NTYyOTY0MTEsImV4cCI6MzY1OTUzMDc3MzY0MTF9.KlJEocKVqN72HUxE1mIKNbuYn-9Al1V8z-S6KkM6eAk"
              alt="Plus Icon"
            />
          </div>
          <h3 style="font-family: 'Lato', sans-serif !important">Must</h3>
        </div>
        <div class="section-content">
          <p *ngIf="helpsWho[0]">{{ helpsWho[0] }}</p>
        </div>
      </div>

      <div class="info-section" *ngIf="helpsWho?.length > 1">
        <div class="section-header">
          <div class="plus-icon">
            <img
              src="https://wrijpsiiuvmeqaeklnqi.supabase.co/storage/v1/object/sign/new/star%20(1)%204.svg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV9jNTNkMmE3MS00ODk1LTRmN2YtYWExYS01ZjA1ZDhlYWE2YTciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJuZXcvc3RhciAoMSkgNC5zdmciLCJpYXQiOjE3NTYyOTY0MTEsImV4cCI6MzY1OTUzMDc3MzY0MTF9.KlJEocKVqN72HUxE1mIKNbuYn-9Al1V8z-S6KkM6eAk"
              alt="Plus Icon"
            />
          </div>
          <h3 style="font-family: 'Lato', sans-serif !important">
            For Desired Results
          </h3>
        </div>
        <div class="section-content">
          <p>{{ helpsWho[1] }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
