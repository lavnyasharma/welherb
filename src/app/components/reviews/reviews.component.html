<!-- Home Reviews Carousel Section -->
<div class="reviews-section">
    <div class="" style="display: flex; justify-content: space-between;margin-bottom: 60px;">
        <div class="reviews-header">
        <h2 class="reviews-title">
          <span class="trust-text">Trust</span> that we have earned
        </h2>
        <p class="reviews-subtitle">
          By bringing measurable results that show up in your reports
          and your body.
        </p>
      </div>
      <div class="">
      <div class="">
     
      </div>
    
      </div>
    </div>
     
      <div class="carousel-container">
        <div class="carousel-track" #carouselTrack>
          <div *ngFor="let review of displayReviews" 
               class="review-card"
               [ngClass]="review.type === 'esr' ? 'review-card-esr' : 'review-card-digestick'">
            
            <!-- ESR Card (Large Blue - Center Style) -->
            <ng-container *ngIf="review.type === 'esr'">
              <div class="card-frame-blue">
                <div class="card-inner-white">
                  <div class="reviewer-info-top-center">
                    <img [src]="review.image" [alt]="review.name" class="reviewer-image">
                    <div class="reviewer-details">
                      <h3 class="reviewer-name">{{ review.name }}</h3>
                      <p class="reviewer-benefit">{{ review.benefit }}</p>
                    </div>
                  </div>
                  
                  <hr class="card-divider">
                  
                  <div class="review-content-center">
                    <div class="rating">
                      <span *ngFor="let star of getStars(review.rating)" class="star">‚òÖ</span>
                    </div>
                    <blockquote class="review-quote">
                      "{{ review.quote }}"
                    </blockquote>
                  </div>
                </div>
              </div>
            </ng-container>
    
            <!-- Digestick Card (Small Green - Side Style) -->
            <ng-container *ngIf="review.type === 'digestick'">
              <div class="card-frame-green">
                <div class="card-content-side">
                  <div class="rating">
                    <span *ngFor="let star of getStars(review.rating)" class="star">‚òÖ</span>
                  </div>
                  
                  <blockquote class="review-quote">
                    "{{ review.quote }}"
                  </blockquote>
    
                  <div class="reviewer-info-pill">
                    <img [src]="review.image" [alt]="review.name" class="reviewer-image">
                    <div class="reviewer-details">
                      <h3 class="reviewer-name">{{ review.name }}</h3>
                      <p class="reviewer-benefit">{{ review.benefit }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
        
        <div class="progress-line" #progressLine [style.--progress-position]="progressPosition + '%'"></div>
      </div>
</div>

<!-- Detailed Reviews & Ratings Section -->
<div class="feedback-section">
  <!-- Top Summary Cards -->
  <div class="summary-cards-container">
    
    <!-- Rating Summary Card -->
    <div class="summary-card rating-card">
      <div class="rating-header">
        <span class="rating-big">4.5</span>
        <span class="rating-total">/ 5</span>
      </div>
      <div class="reviews-count-row">
        <div class="star-row-small">
          <span class="star-filled">‚òÖ</span><span class="star-filled">‚òÖ</span><span class="star-filled">‚òÖ</span><span class="star-filled">‚òÖ</span><span class="star-half">‚òÖ</span>
        </div>
        <span class="based-on">Based on 603 reviews</span>
        <span class="check-icon">‚úì</span>
      </div>
      
      <hr class="card-divider-light">

      <div class="rating-bars">
        <div class="bar-row" *ngFor="let dist of ratingDistribution">
          <div class="bar-container">
            <div class="bar-fill" [style.width.%]="dist.percentage"></div>
          </div>
          <div class="bar-label">
            <span class="bar-stars">{{ dist.stars | number: '1.1-1' }}</span>
            <span class="star-icon-green">‚òÖ</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Write Review Card -->
    <div class="summary-card write-review-card">
      <div class="authenticity-badge">
        <img src="assets/wreath-badge.png" alt="Bronze Authenticity" class="wreath-img" onerror="this.style.display='none'">
        <div class="badge-content">
          <span class="badge-icon">üåø</span> 
          <div class="badge-text-col">
            <span class="badge-title">BRONZE</span>
            <span class="badge-subtitle">AUTHENTICITY</span>
            <span class="badge-score">86.9</span>
          </div>
        </div>
      </div>
      
      <button class="write-review-btn">
        <span class="pen-icon">‚úé</span> Write a review
      </button>
    </div>
  </div>

  <!-- Reviews List Container -->
  <div class="reviews-list-container">
    <div class="list-header">
      <h3 class="list-title">Trust That We Have Earned</h3>
      <div class="sort-dropdown">
        <span>Sort by:</span>
        <button class="sort-btn">Newest <i class="pi pi-chevron-down" style="font-size: 0.8rem;"></i></button>
      </div>
    </div>
    
    <hr class="list-divider">

    <div class="reviews-feed">
      <div class="review-entry" *ngFor="let review of detailedReviews; let last = last">
        <div class="entry-header">
          <div class="avatar-circle">{{ review.initial }}</div>
          <div class="header-info">
            <div class="stars-date-row">
              <div class="entry-stars">
                 <span *ngFor="let s of getStarsArray(review.stars)" class="star-filled-green">‚òÖ</span>
              </div>
              <span class="entry-date">{{ review.date }}</span>
            </div>
            <div class="name-verified-row">
              <span class="entry-name">{{ review.name }}</span>
              <span *ngIf="review.verified" class="verified-badge">Verified</span>
            </div>
          </div>
        </div>

        <h4 class="entry-title">{{ review.title }}</h4>
        <p class="entry-content">{{ review.content }}</p>

        <hr *ngIf="!last" class="entry-divider">
      </div>
    </div>

    <!-- Pagination -->
    <!-- <div class="pagination">
      <button class="page-arrow prev" [disabled]="currentPage === 1">‚Üê</button>
      <div class="page-numbers">
        <button *ngFor="let p of [1, 2, 3]" 
              class="page-number-btn" 
              [class.active]="p === currentPage">
          {{ p }}
        </button>
        <span class="page-dots">.....</span>
        <button class="page-number-btn">7</button>
      </div>
      <button class="page-arrow next">‚Üí</button>
    </div> -->
  </div>
</div>